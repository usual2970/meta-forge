import{u as I,b as M,c as b,r as m,l as T,d as t,o as p,e as w,g as c,t as f,s as y,f as n,w as s,F as k,p as g,h,b5 as q,i as z}from"./index-C3yY4eQP.js";import{d as A}from"./data-DSng3jim.js";const G={class:"flex justify-between"},H={class:"text-2xl text-slate-700"},J=c("div",{class:"flex"},null,-1),K={class:"flex justify-between mt-2"},O={class:"w-full"},X={__name:"EntityDetailView",setup(P){const a=I(),v=M(),x=b(()=>v.getLabel(a.currentRoute.value.params.name)),R=b(()=>`/entity/${a.currentRoute.value.params.name}`),u=m({}),F=async()=>{const r=v.getSchemaIdField(a.currentRoute.value.params.name),l=await A({table:a.currentRoute.value.params.name,filter:`${r.name}=${a.currentRoute.value.params.id}`});u.value=l.data},_=m([]),L=async r=>{const l=await g({key:`${r}_field_label`});let o={};if(l.code==0&&(o=l.data),console.log(o,i.value,u.value),i.value)_.value=i.value.fields.filter(e=>e.visible).map(e=>({label:o[e.name]?o[e.name]:e.name,name:e.name}));else for(let e in u.value)_.value.push({label:o[e]?o[e]:e,name:e})},i=m(null),S=async()=>{const r=`${a.currentRoute.value.params.name}_crud_detail`,l=await g({key:r});l.code==0&&(i.value=l.data)};return T(async()=>{await S(),await F(),await L(a.currentRoute.value.params.name)}),(r,l)=>{const o=t("router-link"),e=t("a-breadcrumb-item"),$=t("a-breadcrumb"),B=t("a-divider"),D=t("a-input"),N=t("a-form-item"),V=t("a-col"),C=t("a-row"),j=t("a-form");return p(),w(k,null,[c("div",G,[c("div",H,f(y(a).currentRoute.value.params.id),1),J]),c("div",K,[n($,{class:""},{default:s(()=>[n(e,null,{default:s(()=>[n(o,{to:R.value},{default:s(()=>[h(f(x.value),1)]),_:1},8,["to"])]),_:1}),n(e,null,{default:s(()=>[h(f(y(a).currentRoute.value.params.id),1)]),_:1})]),_:1})]),n(B),c("div",O,[n(j,null,{default:s(()=>[n(C,null,{default:s(()=>[(p(!0),w(k,null,q(_.value,(d,E)=>(p(),z(V,{span:12,key:E},{default:s(()=>[n(N,{label:d.label,"label-col":{span:5},"wrapper-col":{span:18}},{default:s(()=>[n(D,{value:u.value[d.name],"onUpdate:value":U=>u.value[d.name]=U},null,8,["value","onUpdate:value"])]),_:2},1032,["label"])]),_:2},1024))),128))]),_:1})]),_:1})])],64)}}};export{X as default};
