import{k as h,l as R,u as z,c as _,r as g,n as w,p as x,a as C,b as m,o as k,d as B,e as l,w as d,F as N,g as b,t as V,q}from"./index-OeQkHSzb.js";const E=i=>h({url:"/api/v1/data/list",method:"get",params:i}),O={__name:"EntityView",setup(i){const f=R(),n=z(),v=_(()=>q(n.currentRoute.value.params.name)),p=g([]),c=async e=>{const a={table:e,page:r.current,pageSize:r.pageSize};let t=o.value;if(t&&t.order){let u=t.order==="ascend"?"asc":"desc";a.orderBy=`${t.field} ${u}`}const s=await E(a);s.code===0&&(p.value=s.data.data,r.total=s.data.totalRecords)};w(async()=>{console.log(n),await c(n.currentRoute.value.params.name)}),x((e,a)=>{e.params.name!==a.params.name&&(o.value=null,c(e.params.name))});const o=g(),S=_(()=>{const e=o.value||{};return f.getSchemaColumns(n.currentRoute.value.params.name).map(a=>(a.key===e.columnKey&&e.order?a.sortOrder=e.order:a.sortOrder=null,a))}),r=C({total:0,current:1,pageSize:20}),y=(e,a,t)=>{r.current=e.current,r.pageSize=e.pageSize,o.value=t,c(n.currentRoute.value.params.name)};return(e,a)=>{const t=m("a-breadcrumb-item"),s=m("a-breadcrumb"),u=m("a-table");return k(),B(N,null,[l(s,{class:""},{default:d(()=>[l(t,null,{default:d(()=>[b("工作表")]),_:1}),l(t,null,{default:d(()=>[b(V(v.value),1)]),_:1})]),_:1}),l(u,{dataSource:p.value,columns:S.value,class:"my-5",size:"middle",scroll:{x:1500,y:800},pagination:r,onChange:y},null,8,["dataSource","columns","pagination"])],64)}}};export{O as default};
