import{r as N,a as S,c as m,u as V,b as n,o as i,d as g,e as t,w as s,f as d,g as p,h as k,i as f,F as B,j as F,m as h}from"./index-OeQkHSzb.js";const z={class:"min-w-[500px] border rounded-md bg-blue-500 font-mono"},R=d("div",{class:"p-7"},[d("div",{class:"h-11 text-4xl text-center text-white"},"MetaForge"),d("div",{class:"text-xl pt-1 text-center text-white"},"数据库配置"),d("div",{class:"text-sm text-center text-white pt-1"},"设置数据库连接")],-1),E={__name:"InitialView",setup(I){const v=N(),a=S({kind:"",file:"",host:"",port:"",user:"",password:"",database:""}),b=m(()=>a.kind==="sqlite"),_=m(()=>["mysql","postgresql"].includes(a.kind)),y=m(()=>b.value||_.value),w={kind:[{message:"Please select a kind",required:!0,trigger:"change"}],file:[{validator:async(r,e)=>a.kind=="sqlite"&&e==""?Promise.reject("Please input a file"):Promise.resolve(),trigger:"change"}],host:[{validator:async(r,e)=>a.kind=="mysql"&&e==""?Promise.reject("Please input a host"):Promise.resolve(),trigger:"change"}],port:[{validator:async(r,e)=>a.kind=="mysql"&&e==""?Promise.reject("Please input a port"):Promise.resolve(),trigger:"change"}],user:[{validator:async(r,e)=>a.kind=="mysql"&&e==""?Promise.reject("Please input a user"):Promise.resolve(),trigger:"change"}],password:[{validator:async(r,e)=>a.kind=="mysql"&&e==""?Promise.reject("Please input a password"):Promise.resolve(),trigger:"change"}],database:[{validator:async(r,e)=>a.kind=="mysql"&&e==""?Promise.reject("Please input a database"):Promise.resolve(),trigger:"change"}]},P=V(),x=async()=>{try{await v.value.validate();const r=await F(a);return r.code==0?(h.success("Initialize success",2),P.push("/")):h.error(r.msg)}catch(r){console.log(JSON.stringify(r))}};return(r,e)=>{const c=n("a-select-option"),q=n("a-select"),o=n("a-form-item"),u=n("a-input"),C=n("a-input-password"),U=n("a-button"),j=n("a-form");return i(),g("div",z,[R,t(j,{class:"p-7 bg-white",labelCol:{span:5},ref_key:"formRef",ref:v,rules:w,model:a},{default:s(()=>[t(o,{label:"数据库类型","has-feedback":"",name:"kind"},{default:s(()=>[t(q,{value:a.kind,"onUpdate:value":e[0]||(e[0]=l=>a.kind=l),placeholder:"数据库类型"},{default:s(()=>[t(c,{value:""},{default:s(()=>[p("--选择数据库类型--")]),_:1}),t(c,{value:"mysql"},{default:s(()=>[p("Mysql")]),_:1}),t(c,{value:"sqlite"},{default:s(()=>[p("Sqlite")]),_:1})]),_:1},8,["value"])]),_:1}),b.value?(i(),k(o,{key:0,label:"数据库文件",labelCol:{span:5},"has-feedback":"",name:"file"},{default:s(()=>[t(u,{value:a.file,"onUpdate:value":e[1]||(e[1]=l=>a.file=l)},null,8,["value"])]),_:1})):f("",!0),_.value?(i(),g(B,{key:1},[t(o,{label:"主机(host)",labelCol:{span:5},"has-feedback":"",name:"host"},{default:s(()=>[t(u,{value:a.host,"onUpdate:value":e[2]||(e[2]=l=>a.host=l)},null,8,["value"])]),_:1}),t(o,{label:"端口(port)",labelCol:{span:5},"has-feedback":"",name:"port"},{default:s(()=>[t(u,{value:a.port,"onUpdate:value":e[3]||(e[3]=l=>a.port=l)},null,8,["value"])]),_:1}),t(o,{label:"用户",labelCol:{span:5},"has-feedback":"",name:"user"},{default:s(()=>[t(u,{value:a.user,"onUpdate:value":e[4]||(e[4]=l=>a.user=l)},null,8,["value"])]),_:1}),t(o,{label:"密码",labelCol:{span:5},"has-feedback":"",name:"password"},{default:s(()=>[t(C,{value:a.password,"onUpdate:value":e[5]||(e[5]=l=>a.password=l)},null,8,["value"])]),_:1}),t(o,{label:"数据库",labelCol:{span:5},"has-feedback":"",name:"database"},{default:s(()=>[t(u,{value:a.database,"onUpdate:value":e[6]||(e[6]=l=>a.database=l)},null,8,["value"])]),_:1})],64)):f("",!0),y.value?(i(),k(o,{key:2,"wrapper-col":{offset:19}},{default:s(()=>[t(U,{type:"primary","html-type":"submit",size:"large",class:"bg-blue-500",onClick:x},{default:s(()=>[p("提交")]),_:1})]),_:1})):f("",!0)]),_:1},8,["model"])])}}};export{E as default};
