import{f as r,A as I,b as K,u as F,r as g,n as N,z as q,d as u,o as d,e as j,w as l,s as y,v as V,h,m as P,i as R,F as U,B as J,q as Q,C as T,c as D,g as b,t as O,j as $,Q as B}from"./index-DyVCFT0J.js";import{S as C}from"./SettingOutlined-DSY42f78.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};const W=G;function E(m){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.forEach(function(a){X(m,a,e[a])})}return m}function X(m,t,e){return t in m?Object.defineProperty(m,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):m[t]=e,m}var L=function(t,e){var n=E({},t,e.attrs);return r(I,E({},n,{icon:W}),null)};L.displayName="SaveOutlined";L.inheritAttrs=!1;const A=L,Y={class:"pt-7"},Z={__name:"EntityDictSetting",setup(m){const t=K(),e=F(),n=g({}),a=g(),_={plural:[{required:!0,message:"请输入复数名称",trigger:["change","blur"]}],singular:[{required:!0,message:"请输入单数名称",trigger:["change","blur"]}]};N(()=>{let s=`${e.currentRoute.value.params.name}_dict`;n.value=q(t.dict[s]?t.dict[s]:{})});const p=async()=>{try{await a.value.validate(),await t.saveDict({uri:`${e.currentRoute.value.params.name}_dict`,data:q(n.value),type:"dict"}),P.success("保存成功")}catch(s){console.log(JSON.stringify(s))}};return(s,v)=>{const k=u("a-input"),f=u("a-form-item"),i=u("a-button"),c=u("a-form");return d(),j("div",Y,[r(c,{model:n.value,"label-col":{span:3},"wrapper-col":{span:18},rules:_,ref_key:"dictFormRef",ref:a},{default:l(()=>[r(f,{label:"复数",name:"plural"},{default:l(()=>[r(k,{value:n.value.plural,"onUpdate:value":v[0]||(v[0]=o=>n.value.plural=o),type:"text"},null,8,["value"])]),_:1}),r(f,{label:"单数",name:"singular"},{default:l(()=>[r(k,{value:n.value.singular,"onUpdate:value":v[1]||(v[1]=o=>n.value.singular=o),type:"text"},null,8,["value"])]),_:1}),r(f,{"wrapper-col":{offset:19}},{default:l(()=>[r(i,{type:"primary","html-type":"submit",size:"large",class:"bg-blue-500",onClick:p,icon:y(V(A))},{default:l(()=>[h("保存")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])])}}},ee={__name:"EntityFieldLabelSetting",setup(m){const t=K(),e=F(),n=g({}),a=g({}),_=g(),p=g({}),s=async()=>{const i=`${e.currentRoute.value.params.name}_field_label`,c=await Q({key:i});c.code==0&&(n.value=c.data)},v=()=>{const i=t.schemaMap[e.currentRoute.value.params.name];a.value=i.fields.reduce((c,o)=>(c[o.name]="",n.value[o.name]&&(c[o.name]=n.value[o.name]),c),{})},k=()=>{const i=t.schemaMap[e.currentRoute.value.params.name];p.value=i.fields.reduce((c,o)=>(c[o.name]=[{required:!0,message:"请输入标签",trigger:["change","blur"]}],c),{})};N(async()=>{await s(),v(),k()});const f=async()=>{try{await _.value.validate(),await T({uri:`${e.currentRoute.value.params.name}_field_label`,data:q(a.value),type:"field_label"}),P.success("保存成功")}catch(i){console.log(JSON.stringify(i))}};return(i,c)=>{const o=u("a-input"),w=u("a-form-item"),z=u("a-button"),x=u("a-form");return d(),R(x,{model:a.value,"label-col":{span:3},"wrapper-col":{span:18},ref_key:"formRef",ref:_,rules:p.value},{default:l(()=>[(d(!0),j(U,null,J(a.value,(M,S)=>(d(),R(w,{key:S,label:S,name:S,rules:[{required:!0,message:"请输入"}]},{default:l(()=>[r(o,{value:a.value[S],"onUpdate:value":H=>a.value[S]=H},null,8,["value","onUpdate:value"])]),_:2},1032,["label","name"]))),128)),r(w,{"wrapper-col":{offset:19}},{default:l(()=>[r(z,{type:"primary","html-type":"submit",size:"large",class:"bg-blue-500",onClick:f,icon:y(V(A))},{default:l(()=>[h("保存")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model","rules"])}}},te={class:"pt-3 pl-5"},ae={__name:"EntityFieldSetting",setup(m){const t=F(),e=g();return N(()=>{t.currentRoute.value.query.tab||(e.value="labels"),e.value=t.currentRoute.value.query.tab}),(n,a)=>{const _=u("a-tab-pane"),p=u("a-tabs");return d(),j("div",te,[r(p,{activeKey:e.value,"onUpdate:activeKey":a[0]||(a[0]=s=>e.value=s)},{default:l(()=>[r(_,{key:"labels",tab:"标签"},{default:l(()=>[r(ee)]),_:1}),r(_,{key:"form",tab:"表单","force-render":""},{default:l(()=>[h("Content of Tab Pane 2")]),_:1})]),_:1},8,["activeKey"])])}}},ne={class:"flex justify-between"},re={class:"text-2xl text-slate-700"},le={class:"flex justify-between mt-2"},se={class:"mt-5 flex"},oe={class:"ml-5 grow border rounded flex flex-col"},ue={class:"flex border-b justify-between items-center"},ce={class:"text-xl text-slate-700 p-3"},ie={class:"flex-grow"},_e={__name:"EntitySettingView",setup(m){const t=K(),e=F(),n={crud:"增删改查",dict:"字典",field:"字段",relation:"关联"},a=D(()=>n[e.currentRoute.value.params.type]+"设置"),_=D(()=>t.getLabel(e.currentRoute.value.params.name)),p=D(()=>`/entity/${e.currentRoute.value.params.name}`),s=g(["crud"]);N(async()=>{s.value=[e.currentRoute.value.params.type]});const v=[{label:"增删改查",key:"crud",icon:()=>y(C),path:`/entity/${e.currentRoute.value.params.name}/setting/basic`},{type:"divider"},{label:"字典",key:"dict",icon:()=>y(C),path:`/entity/${e.currentRoute.value.params.name}/setting/dict`},{type:"divider"},{label:"字段",key:"field",icon:()=>y(C),path:`/entity/${e.currentRoute.value.params.name}/setting/field`},{type:"divider"},{label:"关联",key:"relation",icon:()=>y(C),path:`/entity/${e.currentRoute.value.params.name}/setting/relation`}],k=f=>{e.push({name:"entity-setting",params:{name:e.currentRoute.value.params.name,type:f.key}})};return(f,i)=>{const c=u("router-link"),o=u("a-breadcrumb-item"),w=u("a-breadcrumb"),z=u("a-menu"),x=u("a-button");return d(),j(U,null,[b("div",ne,[b("div",re,O(a.value),1)]),b("div",le,[r(w,{class:""},{default:l(()=>[r(o,null,{default:l(()=>[r(c,{to:p.value},{default:l(()=>[h(O(_.value),1)]),_:1},8,["to"])]),_:1}),r(o,null,{default:l(()=>[h(O(a.value),1)]),_:1})]),_:1})]),b("div",se,[r(z,{items:v,class:"min-w-56 border rounded shadow-lg",selectedKeys:s.value,"onUpdate:selectedKeys":i[0]||(i[0]=M=>s.value=M),onClick:k},null,8,["selectedKeys"]),b("div",oe,[b("div",ue,[b("div",ce,O(a.value),1),s.value[0]=="dict"?(d(),R(x,{key:0,icon:y(V(B)),type:"link"},{default:l(()=>[h("解释字典设置")]),_:1},8,["icon"])):$("",!0),s.value[0]=="field"?(d(),R(x,{key:1,icon:y(V(B)),type:"link"},{default:l(()=>[h("解释字段设置")]),_:1},8,["icon"])):$("",!0)]),b("div",ie,[s.value[0]==="dict"?(d(),R(Z,{key:0})):$("",!0),s.value[0]==="field"?(d(),R(ae,{key:1})):$("",!0)])])])],64)}}};export{_e as default};
